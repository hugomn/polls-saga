(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,n){e.exports=n(342)},340:function(e,t,n){},342:function(e,t,n){"use strict";n.r(t);var c,a=n(0),r=n.n(a),o=n(53),i=n.n(o),u=n(32),E=n(35),s=n(167),l=n(168),O=n(155),C=n(152),p=n(62),T=n(36),_=n(37),d=n(39),S=n(38),h=n(40),b=n(359),Q=n(357),f=n(30);!function(e){e.QUESTION_SHOW_DETAIL="@@questions/QUESTION_SHOW_DETAIL",e.QUESTION_CHOICE_SELECTED="@@questions/QUESTION_CHOICE_SELECTED",e.QUESTION_CHOICE_VOTE_REQUESTED="@@questions/QUESTION_CHOICE_VOTE_REQUESTED",e.QUESTION_CHOICE_VOTE_SUCEEDED="@@questions/QUESTION_CHOICE_VOTE_SUCEEDED",e.QUESTION_CHOICE_VOTE_FAILED="@@questions/QUESTION_CHOICE_VOTE_FAILED",e.QUESTION_FETCH_REQUESTED="@@questions/QUESTION_FETCH_REQUESTED",e.QUESTION_FETCH_SUCCEEDED="@@questions/QUESTION_FETCH_SUCCEEDED",e.QUESTION_FETCH_FAILED="@@questions/QUESTION_FETCH_FAILED",e.QUESTIONS_FETCH_REQUESTED="@@questions/QUESTIONS_FETCH_REQUESTED",e.QUESTIONS_FETCH_SUCCEEDED="@@questions/QUESTIONS_FETCH_SUCCEEDED",e.QUESTIONS_FETCH_FAILED="@@questions/QUESTIONS_FETCH_FAILED"}(c||(c={}));var m=function(e){return Object(f.action)(c.QUESTION_CHOICE_VOTE_SUCEEDED,e)},I=function(e){return Object(f.action)(c.QUESTION_CHOICE_VOTE_FAILED,e)},j=function(e){return Object(f.action)(c.QUESTION_FETCH_SUCCEEDED,e)},v=function(e){return Object(f.action)(c.QUESTION_FETCH_FAILED,e)},U=function(e){return Object(f.action)(c.QUESTIONS_FETCH_SUCCEEDED,e)},D=function(e){return Object(f.action)(c.QUESTIONS_FETCH_FAILED,e)},H=n(348),N=n(355),g=n(356),F=n(349),y=n(353),k=function(e){function t(){var e,n;Object(T.a)(this,t);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(n=Object(d.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(a)))).handleClick=function(){n.props.showDetail(n.props.question)},n}return Object(h.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){var e=this.props.question;return a.createElement(y.a,{fluid:!0,onClick:this.handleClick},a.createElement(y.a.Content,null,a.createElement(y.a.Header,null,e.question),a.createElement(y.a.Meta,null,new Date(e.published_at).toLocaleString()),a.createElement(y.a.Description,null,e.choices.length," choices")))}}]),t}(a.Component),w=Object(u.c)(null,function(e){return{showDetail:function(t){return e(function(e){return Object(f.action)(c.QUESTION_SHOW_DETAIL,e)}(t))}}})(k),x=function(e){function t(){return Object(T.a)(this,t),Object(d.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.getQuestions()}},{key:"render",value:function(){var e=this.props.questions;return a.createElement(a.Fragment,null,a.createElement(H.a,null,a.createElement(N.a,{as:"h1"},"Questions"),a.createElement(g.a,{stackable:!0},e.length?e.map(function(e){return a.createElement(g.a.Column,{computer:4,tablet:8,mobile:16,key:e.url},a.createElement(w,{question:e}))}):a.createElement(F.a,{active:!0,size:"large",inline:"centered",style:{marginTop:"250px"}},"Loading..."))))}}]),t}(a.Component),q=Object(u.c)(function(e){return{questions:e.questions.items||[]}},function(e){return{getQuestions:function(){e(Object(f.action)(c.QUESTIONS_FETCH_REQUESTED))}}})(x),L=n(352),A=n(358),R=n(350),V=n(351),W=n(354),M=n(153),z=function(e){function t(){var e,n;Object(T.a)(this,t);for(var c=arguments.length,r=new Array(c),o=0;o<c;o++)r[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(r)))).handleChoiceClick=function(e){n.props.selectChoice(e)},n.handleVoteSubmit=function(){n.props.choiceVote(n.props.activeQuestion.selectedChoice)},n.renderChoice=function(e){var t=n.props.activeQuestion,c=t.selectedChoice,r=c&&e.url===c.url;return console.log("[dev:hugo] selectedChoice",c),a.createElement(L.a.Row,{key:e.url,onClick:function(){return n.handleChoiceClick(e)},positive:r},a.createElement(L.a.Cell,{collapsing:!0,textAlign:"center"},a.createElement(A.a,{checked:r})),a.createElement(L.a.Cell,null,e.choice),a.createElement(L.a.Cell,null,e.votes," votes"),a.createElement(L.a.Cell,null,a.createElement(R.a,{total:t.total,value:e.votes,precision:0,indicating:!0})))},n}return Object(h.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.getQuestion(this.props.match.params.id)}},{key:"render",value:function(){var e=this,t=this.props.activeQuestion;return t?a.createElement(a.Fragment,null,a.createElement(H.a,null,a.createElement(N.a,{as:"h1"},"Questions detail"),a.createElement(N.a,{as:"h2"},"Question: ",t.question),a.createElement(V.a,{hidden:!0}),a.createElement(L.a,{celled:!0,definition:!0,selectable:!0},a.createElement(L.a.Body,null,t.choices.map(function(t){return e.renderChoice(t)})),a.createElement(L.a.Footer,{fullWidth:!0},a.createElement(L.a.Row,null,a.createElement(L.a.HeaderCell,null),a.createElement(L.a.HeaderCell,{colSpan:"4"},a.createElement(W.a,{floated:"right",labelPosition:"left",icon:!0,primary:!0,disabled:!t.selectedChoice,onClick:this.handleVoteSubmit},a.createElement(M.a,{name:"add"})," Save Vote"))))))):a.createElement(F.a,{active:!0,size:"large",inline:"centered",style:{marginTop:"250px"}},"Loading...")}}]),t}(a.Component),B=Object(u.c)(function(e){return{activeQuestion:e.questions.activeQuestion}},function(e){return{getQuestion:function(t){e(function(e){return Object(f.action)(c.QUESTION_FETCH_REQUESTED,{id:e})}(t))},choiceVote:function(t){e(function(e){return Object(f.action)(c.QUESTION_CHOICE_VOTE_REQUESTED,e)}(t))},selectChoice:function(t){console.log("[dev:hugo] choice",t),e(function(e){return Object(f.action)(c.QUESTION_CHOICE_SELECTED,e)}(t))}}})(z),J=function(e){function t(){return Object(T.a)(this,t),Object(d.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b.a,null,r.a.createElement(Q.a,{exact:!0,path:"/",component:q}),r.a.createElement(Q.a,{path:"/questions/:id",component:B})))}}]),t}(a.Component),P=function(e){function t(){return Object(T.a)(this,t),Object(d.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(_.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(J,null))}}]),t}(a.Component),G=n(25),K=n.n(G),X=n(20),Y=n(80),Z=n.n(Y),$="https://polls.apiblueprint.org",ee={getQuestion:function(e){return Z.a.get("".concat($,"/questions/").concat(e))},getQuestions:function(){return Z.a.get("".concat($,"/questions"))},postChoice:function(e){return Z.a.post("".concat($).concat(e))}},te=n(6),ne=K.a.mark(ie),ce=K.a.mark(ue),ae=K.a.mark(Ee),re=K.a.mark(se),oe=K.a.mark(le);function ie(e){var t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(X.b)(ee.postChoice,e.payload.url);case 3:return t=n.sent,n.next=6,Object(X.d)(m(t.data));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(X.d)(I(n.t0));case 12:case"end":return n.stop()}},ne,this,[[0,8]])}function ue(e){var t;return K.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(X.b)(ee.getQuestion,e.payload.id);case 3:return t=n.sent,n.next=6,Object(X.d)(j(t.data));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(X.d)(v(n.t0));case 12:case"end":return n.stop()}},ce,this,[[0,8]])}function Ee(){var e;return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(X.b)(ee.getQuestions);case 3:return e=t.sent,t.next=6,Object(X.d)(U(e.data));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(X.d)(D(t.t0));case 12:case"end":return t.stop()}},ae,this,[[0,8]])}function se(e){return K.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(X.d)(Object(te.d)(e.payload.url));case 2:case"end":return t.stop()}},re,this)}function le(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.a)([Object(X.e)(c.QUESTION_SHOW_DETAIL,se),Object(X.e)(c.QUESTION_CHOICE_VOTE_REQUESTED,ie),Object(X.e)(c.QUESTION_FETCH_REQUESTED,ue),Object(X.e)(c.QUESTIONS_FETCH_REQUESTED,Ee)]);case 2:case"end":return e.stop()}},oe,this)}var Oe=le,Ce=n(43),pe={loading:!1,activeQuestion:void 0,items:[],errors:void 0},Te=function(e){return e.choices.reduce(function(e,t){return e+t.votes},0)},_e=function(e,t){return e.choices.map(function(e){return e.url===t.url?t:e})},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.QUESTION_FETCH_SUCCEEDED:var n=t.payload;return Object(Ce.a)({},e,{activeQuestion:Object(Ce.a)({total:Te(n),selectedChoice:void 0},n)});case c.QUESTION_CHOICE_VOTE_SUCEEDED:var a=t.payload;return Object(Ce.a)({},e,{activeQuestion:Object(Ce.a)({},e.activeQuestion,{total:Te(e.activeQuestion),choices:_e(e.activeQuestion,a),selectedChoice:void 0})});case c.QUESTION_CHOICE_SELECTED:return Object(Ce.a)({},e,{activeQuestion:Object(Ce.a)({},e.activeQuestion,{selectedChoice:t.payload})});case c.QUESTIONS_FETCH_SUCCEEDED:return Object(Ce.a)({},e,{items:t.payload});case c.QUESTION_SHOW_DETAIL:return Object(Ce.a)({},e,{activeQuestion:void 0});case c.QUESTION_FETCH_REQUESTED:case c.QUESTIONS_FETCH_REQUESTED:default:return e}},Se=K.a.mark(he);function he(){return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.a)([Object(X.c)(Oe)]);case 2:case"end":return e.stop()}},Se,this)}n(340);var be,Qe=Object(O.composeWithDevTools)({}),fe=Object(l.a)(),me=Object(s.a)({basename:"/react-redux-saga-starter"}),Ie=window.initialReduxState,je=Object(E.createStore)((be=me,Object(E.combineReducers)({router:Object(p.b)(be),questions:de})),Ie,Qe(Object(E.applyMiddleware)(Object(C.a)(me),fe)));fe.run(he),i.a.render(r.a.createElement(u.a,{store:je},r.a.createElement(p.a,{history:me},r.a.createElement(P,null))),document.getElementById("root"))}},[[180,2,1]]]);
//# sourceMappingURL=main.c7797838.chunk.js.map